<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
<title>Selamat Ulang Tahun Fakhri üíô</title>

<link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<style>
*{box-sizing:border-box}

/* BODY */
body{
    margin:0;
    font-family:'Nunito Sans',sans-serif;
    height:100vh;
    overflow:hidden;
    color:white;
    background:linear-gradient(135deg,#0a0f22,#1a1a2e,#16213e);
    animation:bgShift 20s ease-in-out infinite alternate;
}

@keyframes bgShift{
    0%{background-position:0% 50%}
    100%{background-position:100% 50%}
}

.bg{
    position:fixed;
    inset:0;
    background:radial-gradient(circle at top,rgba(10,15,34,.8),rgba(0,0,0,.9));
    z-index:-2;
}

/* CENTER SCENE */
.container{
    position:fixed;
    inset:0;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
    gap:24px;
    padding:16px;
}

/* CLICK TEXT */
#clickText{
    cursor:pointer;
    font-size:clamp(1.2rem,4vw,1.8rem);
    animation:heartbeat 1.5s infinite;
    text-shadow:0 0 20px rgba(255,255,255,.5);
}
@keyframes heartbeat{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.05)}
}

/* ENVELOPE */
.envelope{
    position:relative;
    width:min(320px,85vw);
    aspect-ratio: 320 / 210;
    background:linear-gradient(145deg,#1f4f80,#2a71c7);
    border-radius:0 0 12px 12px;
    box-shadow:0 25px 50px rgba(0,0,0,.7);
    perspective:1000px;
    transition:.4s;
}

.envelope::before{
    content:"";
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:55%;
    background:#4fc3f7;
    clip-path:polygon(0 0,100% 0,50% 100%);
    transform-origin:top;
    transition:.8s;
    z-index:3;
}

.envelope.open::before{
    transform:translateY(-120%);
    opacity:0;
}

/* PAPER */
.paper{
    position:absolute;
    left:10px;
    right:10px;
    bottom:10px;
    height:55%;
    background:#fff;
    border-radius:8px;
    padding:16px;
    overflow-y:auto;
    color:#333;
    line-height:1.6;
    box-shadow:0 -12px 25px rgba(0,0,0,.2);
    transition:1.2s cubic-bezier(.22,1,.36,1);
    z-index:2;
}

/* Saat terbuka */
.envelope.open .paper{
    transform:translateY(-40vh);
    height:65vh;
    max-height:70vh;
    animation:paperFloat 4s ease-in-out infinite;
}

@keyframes paperFloat{
    0%,100%{transform:translateY(-40vh)}
    50%{transform:translateY(-42vh)}
}

/* SHAKE */
.shake{animation:shake .4s}
@keyframes shake{
    0%{transform:translateX(0)}
    25%{transform:translateX(-5px)}
    75%{transform:translateX(5px)}
}

/* TYPING */
#typed-text span{
    opacity:0;
    animation:fade .2s forwards;
}
@keyframes fade{to{opacity:1}}

#cursor{
    display:inline-block;
    width:3px;
    height:1.2em;
    background:#2a71c7;
    animation:blink .8s infinite;
}
@keyframes blink{50%{opacity:0}}

/* CONFETTI */
.confetti{
    position:fixed;
    inset:0;
    pointer-events:none;
    z-index:10;
}
.confetti-piece{
    position:absolute;
    width:10px;
    height:10px;
    background:#4fc3f7;
    border-radius:50%;
    animation:fall 3s linear infinite;
}
@keyframes fall{
    from{transform:translateY(-100vh)}
    to{transform:translateY(100vh);opacity:0}
}

/* CONTROLS */
.controls{
    position:fixed;
    bottom:16px;
    right:16px;
    z-index:20;
}
.control-btn{
    width:48px;
    height:48px;
    border:none;
    border-radius:50%;
    background:rgba(255,255,255,.25);
    color:white;
    font-size:1.2rem;
}

/* RESTART */
#restartBtn{
    padding:10px 22px;
    border:none;
    border-radius:25px;
    background:#4fc3f7;
    color:white;
    display:none;
}
</style>
</head>

<body>
<div class="bg"></div>
<div class="confetti" id="confetti"></div>

<div class="container">
    <h2 id="clickText">Coba klik üéÅ</h2>

    <div class="envelope" id="envelope">
        <div class="paper" id="paper">
            <span id="typed-text"></span><span id="cursor"></span>
        </div>
    </div>

    <button id="restartBtn">Mulai Ulang</button>
</div>

<div class="controls">
    <button class="control-btn" id="musicToggle"><i class="fas fa-play"></i></button>
</div>

<audio id="bg-music" src="lagu.mp3" loop></audio>

<script>
const clickText=document.getElementById('clickText');
const envelope=document.getElementById('envelope');
const paper=document.getElementById('paper');
const typedText=document.getElementById('typed-text');
const cursor=document.getElementById('cursor');
const music=document.getElementById('bg-music');
const restartBtn=document.getElementById('restartBtn');
const confetti=document.getElementById('confetti');
const musicToggle=document.getElementById('musicToggle');

const message=`WAKE UPPP BABYYYY! IT'S YOUR BIRTHDAY! happy birthday üíôüéâ

to youuu, my boo, my sunshine, my everything. hari ini hari kamu...`;

let i=0,opened=false;

function confettiBoom(){
    for(let j=0;j<40;j++){
        const c=document.createElement('div');
        c.className='confetti-piece';
        c.style.left=Math.random()*100+'%';
        confetti.appendChild(c);
        setTimeout(()=>c.remove(),3000);
    }
}

clickText.onclick=()=>{
    if(opened)return;
    opened=true;
    envelope.classList.add('shake');
    setTimeout(()=>{
        envelope.classList.remove('shake');
        envelope.classList.add('open');
        confettiBoom();
        music.play().catch(()=>{});
        musicToggle.innerHTML='<i class="fas fa-pause"></i>';
        typeChar();
    },400);
    clickText.style.display='none';
};

function typeChar(){
    if(i<message.length){
        const s=document.createElement('span');
        s.textContent=message[i++];
        typedText.appendChild(s);
        paper.scrollTop=paper.scrollHeight;
        setTimeout(typeChar,40);
    }else{
        cursor.style.display='none';
        restartBtn.style.display='block';
    }
}

restartBtn.onclick=()=>{
    opened=false;i=0;
    typedText.innerHTML='';
    cursor.style.display='inline-block';
    envelope.classList.remove('open');
    clickText.style.display='block';
    restartBtn.style.display='none';
    music.pause();music.currentTime=0;
    musicToggle.innerHTML='<i class="fas fa-play"></i>';
};

musicToggle.onclick=()=>{
    if(music.paused){
        music.play();musicToggle.innerHTML='<i class="fas fa-pause"></i>';
    }else{
        music.pause();musicToggle.innerHTML='<i class="fas fa-play"></i>';
    }
};
</script>
</body>
</html>

